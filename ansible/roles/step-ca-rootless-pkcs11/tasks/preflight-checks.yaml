---
- name: Verify that all required variables are set
  when: lookup('vars', item) is undefined
  become: no
  delegate_to: localhost
  ansible.builtin.fail:
    msg: >
      Missing required variable: {{ item }}
  loop:
    - step_dns_name
    - step_name
    - step_hsm_pkcs11_uri
    - step_hsm_serial
    - step_hsm_vendor_id
    - step_hsm_product_id
